CREATE DATABASE test;


CREATE TABLE ASSOCIATION (

	ID INTEGER NOT NULL,
	NAME VARCHAR(255) NOT NULL,
	REGION VARCHAR(255) NOT NULL,
	
	PRIMARY KEY (ID)
);

CREATE TABLE COMPETITION (

	ID INTEGER NOT NULL,
	NAME VARCHAR(255) NOT NULL,
	POINT INTEGER NOT NULL,
	
	 PRIMARY KEY (ID)
);

CREATE TABLE MEMBRE (

	ID INTEGER NOT NULL,
	NAME VARCHAR(255) NOT NULL,
	LAST_NAME VARCHAR(255) NOT NULL,
	PASSWORD VARCHAR(255) NOT NULL,
	MAIL VARCHAR(100) NOT NULL,
	BIRTH_DATE DATE,
	CREATION_DATE DATE NOT NULL,
	ROLE INTEGER NOT NULL,
	VALIDATED INTEGER NOT NULL,
	ID_ASSO INTEGER NOT NULL,
	
	PRIMARY KEY (ID),
	FOREIGN KEY (ID_ASSO)REFERENCES ASSOCIATION(ID)
);

CREATE TABLE PERFORMANCE (

	ID INTEGER NOT NULL,
	NAME VARCHAR(255) NOT NULL,
	POINT INTEGER NOT NULL,
	PERF_DT DATE,
	ID_COMP INTEGER,
	ID_MBR INTEGER NOT NULL,
	
	PRIMARY KEY (ID),
	FOREIGN KEY (ID_COMP)REFERENCES COMPETITION(ID),
	FOREIGN KEY (ID_MBR)REFERENCES MEMBRE(ID)
);


CREATE TABLE REL_COMP_MBR (

	ID INTEGER NOT NULL,
	ID_MBR INTEGER NOT NULL,
	ID_COMP INTEGER NOT NULL,
	
	PRIMARY KEY (ID),
	FOREIGN KEY (ID_MBR)REFERENCES MEMBRE(ID),
	FOREIGN KEY (ID_COMP)REFERENCES COMPETITION(ID)
);


CREATE TABLE ROLE (

	ID INTEGER NOT NULL,
	ADMIN INTEGER NOT NULL,
	REFERENT INTEGER NOT NULL,
	USER_M INTEGER NOT NULL,
	USER_V INTEGER NOT NULL,
	
	PRIMARY KEY (ID)
);